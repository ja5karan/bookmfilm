{"version":3,"sources":["app/booking/booking.controller.js"],"names":["BookingComponent","$http","$scope","socket","message","allDates","movDates","currentDate","Date","get","sessionStorage","getItem","then","response","data","MovieDates","j","i","length","d","syncUpdates","$on","unsyncUpdates","window","bookedSeats","disableSeats","myMov","setItem","Poster","Language","angular","module","component","templateUrl","controller","controllerAs"],"mappings":"AAAA;;;;;;AAEA,CAAC,YAAU;AAAA,MAELA,gBAFK;AAGT,8BAAYC,KAAZ,EAAmBC,MAAnB,EAA2BC,MAA3B,EAAmC;AAAA;;AAAA;;AACjC,WAAKC,OAAL,GAAe,OAAf;AACA,WAAKH,KAAL,GAAaA,KAAb;AACA,WAAKE,MAAL,GAAcA,MAAd;AACA,WAAKE,QAAL,GAAgB,EAAhB;AACA,WAAKC,QAAL,GAAgB,EAAhB;AACA,WAAKC,WAAL,GAAmB,IAAIC,IAAJ,EAAnB;;AAGF,WAAKP,KAAL,CAAWQ,GAAX,CAAe,sCAAoCC,eAAeC,OAAf,CAAuB,WAAvB,CAApC,GAAwE,GAAxE,GAA4ED,eAAeC,OAAf,CAAuB,MAAvB,CAA5E,GAA2G,GAA3G,GAA+GD,eAAeC,OAAf,CAAuB,QAAvB,CAA9H,EACKC,IADL,CACU,oBAAY;AAChB,cAAKP,QAAL,GAAgBQ,SAASC,IAAT,CAAc,CAAd,EAAiBC,UAAjC;AACA,YAAIC,IAAE,CAAN;AACA,aAAI,IAAIC,IAAE,CAAV,EAAYA,IAAE,MAAKZ,QAAL,CAAca,MAA5B,EAAmCD,GAAnC,EAAuC;AACrC,cAAIE,IAAI,IAAIX,IAAJ,CAAS,MAAKH,QAAL,CAAcY,CAAd,CAAT,CAAR;AACA,cAAGE,KAAG,IAAIX,IAAJ,EAAN,EAAiB;AACf,kBAAKF,QAAL,CAAcU,CAAd,IAAiB,MAAKX,QAAL,CAAcY,CAAd,CAAjB;AACAD;AACD;AACF;AACD,cAAKb,MAAL,CAAYiB,WAAZ,CAAwB,uBAAxB,EAAiD,MAAKd,QAAtD;AACH,OAZH;;AAcEJ,aAAOmB,GAAP,CAAW,UAAX,EAAuB,YAAW;AAChClB,eAAOmB,aAAP,CAAqB,iBAArB;AACAnB,eAAOmB,aAAP,CAAqB,uBAArB;AACD,OAHD;AAID;;AA9BQ;AAAA;AAAA,gCAgCC;AAAA;;AACR,aAAKrB,KAAL,CAAWQ,GAAX,CAAe,0BAAwBC,eAAeC,OAAf,CAAuB,WAAvB,CAAxB,GAA4D,GAA5D,GAAgED,eAAeC,OAAf,CAAuB,QAAvB,CAAhE,GAAiG,GAAjG,GAAqGD,eAAeC,OAAf,CAAuB,MAAvB,CAArG,GAAoI,GAApI,GAAwID,eAAeC,OAAf,CAAuB,OAAvB,CAAxI,GAAwK,GAAxK,GAA4KD,eAAeC,OAAf,CAAuB,WAAvB,CAA5K,GAAgN,GAAhN,GAAoND,eAAeC,OAAf,CAAuB,UAAvB,CAAnO,EACGC,IADH,CACQ,oBAAY;AAChBW,iBAAOC,WAAP,GAAqBX,SAASC,IAA9B;AACA,iBAAKX,MAAL,CAAYiB,WAAZ,CAAwB,iBAAxB,EAA2CG,OAAOC,WAAlD;AACAD,iBAAOE,YAAP;AACH,SALD;AAMA,aAAKxB,KAAL,CAAWQ,GAAX,CAAe,0BAAwBC,eAAeC,OAAf,CAAuB,WAAvB,CAAvC,EACGC,IADH,CACQ,oBAAY;AAChB,iBAAKc,KAAL,GAAab,SAASC,IAAtB;AACA,iBAAKX,MAAL,CAAYiB,WAAZ,CAAwB,QAAxB,EAAkC,OAAKM,KAAvC;AACAhB,yBAAeiB,OAAf,CAAuB,aAAvB,EAAqC,OAAKD,KAAL,CAAW,CAAX,EAAcE,MAAnD;AACAlB,yBAAeiB,OAAf,CAAuB,WAAvB,EAAmC,OAAKD,KAAL,CAAW,CAAX,EAAcG,QAAjD;AACH,SAND;AAQD;AA/CQ;;AAAA;AAAA;;AAkDXC,UAAQC,MAAR,CAAe,eAAf,EACGC,SADH,CACa,SADb,EACwB;AACpBC,iBAAa,0BADO;AAEpBC,gBAAYlC,gBAFQ;AAGpBmC,kBAAc;AAHM,GADxB;AAOC,CAzDD","file":"booking.controller.js","sourcesContent":["'use strict';\n\n(function(){\n\nclass BookingComponent {\n  constructor($http, $scope, socket) {\n    this.message = 'Hello';\n    this.$http = $http;\n    this.socket = socket;\n    this.allDates = [];\n    this.movDates = [];\n    this.currentDate = new Date();\n\n\n  this.$http.get('/api/moviemappingendpoints/Movie/'+sessionStorage.getItem('MovieName')+'/'+sessionStorage.getItem('City')+'/'+sessionStorage.getItem('Cinema'))\n      .then(response => {\n        this.allDates = response.data[0].MovieDates;\n        var j=0;\n        for(var i=0;i<this.allDates.length;i++){\n          var d = new Date(this.allDates[i]);\n          if(d>=new Date()){\n            this.movDates[j]=this.allDates[i];\n            j++;\n          }\n        }\n        this.socket.syncUpdates('moviemappingendpoints', this.movDates);\n    });\n\n    $scope.$on('$destroy', function() {\n      socket.unsyncUpdates('paymentendpoint');\n      socket.unsyncUpdates('moviemappingendpoints');\n    });\n  }\n\n  $onInit() {\n    this.$http.get('api/paymentendpoints/'+sessionStorage.getItem('MovieName')+'/'+sessionStorage.getItem('Cinema')+'/'+sessionStorage.getItem('City')+'/'+sessionStorage.getItem('Class')+'/'+sessionStorage.getItem('Moviedate')+'/'+sessionStorage.getItem('ShowTime'))\n      .then(response => {\n        window.bookedSeats = response.data;\n        this.socket.syncUpdates('paymentendpoint', window.bookedSeats);\n        window.disableSeats();\n    });\n    this.$http.get('/api/moviesendpoints/'+sessionStorage.getItem('MovieName'))\n      .then(response => {\n        this.myMov = response.data;\n        this.socket.syncUpdates('Movies', this.myMov);\n        sessionStorage.setItem('MoviePoster',this.myMov[0].Poster);\n        sessionStorage.setItem('MovieLang',this.myMov[0].Language);\n    });\n\n  }\n}\n\nangular.module('yoTemplateApp')\n  .component('booking', {\n    templateUrl: 'app/booking/booking.html',\n    controller: BookingComponent,\n    controllerAs: 'bookingCtrl'\n  });\n\n})();\n"]}